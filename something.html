<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Parkinsans:wght@300..800&display=swap');

        :root {
            --main_bg_color: #031926;
            --secondary_color: #9DBEBB;
            --main_text_color_rg: #9DBEBB;
            --main_text_background_b: #F4E9CD;
            --main_text_bgw: #031926;
        }

        body {
            background-color: var(--main_bg_color);
            font-family: 'Parkinsans', sans-serif;
            color: var(--main_text_color_rg);
            margin: 0 auto;
            max-width: 800px;
            padding: 20px;
        }

        #chat-window {
            border: 2px solid var(--secondary_color);
            background-color: rgba(0, 0, 0, 0.3);
            width: 100%; 
            height: 400px; 
            overflow-y: scroll; 
            padding: 20px;
            box-sizing: border-box;
            scroll-behavior: smooth;
            display: flex;
            flex-direction: column;
        }

        .container {
            background-color: var(--main_text_background_b);
            color: var(--main_text_bgw);
            padding: 12px 18px;
            margin: 10px 0;
            max-width: 75%;
            align-self: flex-start;
            position: relative;
            animation: message-slide 0.4s cubic-bezier(0.36,0.11,0.25,1.00) forwards;
        }
        
        .container:has(audio) {
            max-width: none;
            width:50%;
        }

        .container:has(img) {
            width:50%;
        }
        
        .system-msg {
            align-self: center;
            background: none;
            color: var(--secondary_color);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin: 20px 0;
            text-align: center;
            max-width: 100%;
            opacity: 0.7;
        }

        @keyframes message-slide {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }  
        }

        audio {
            width: 100%;
            min-height: 40px;
            margin-top: 8px;
            filter: sepia(20%) saturate(70%) hue-rotate(130deg);
            display: block;
            box-sizing: border-box;
        }

        .chat-img { max-width: 100%; border-radius: 2px; }
        .container p { margin: 0; font-weight: 500; }
        .time-right { font-size: 0.6rem; float: right; margin-top: 5px; opacity: 0.5; }

        button {
            background-color: var(--secondary_color);
            color: var(--main_bg_color);
            border: none;
            padding: 12px 25px;
            font-family: 'Parkinsans', sans-serif;
            font-weight: 800;
            cursor: pointer;
            margin-top: 20px;
            transition: 0.2s;
        }

        button:hover { background-color: white; }
        #chat-window::-webkit-scrollbar { width: 5px; }
        #chat-window::-webkit-scrollbar-thumb { background: var(--secondary_color); }

        .navbar {
            background-color: var(--main_text_background_b);
            padding: 3px 3px;
            /* margin: -20px -20px 20px -20px; */
        }

        .navbar h3 {
            margin: 0;
            color: var(--main_bg_color);
            font-size: 1.5rem;
        }
    </style>
</head>
<body>

    <div class="navbar">
        <h3>MSM Messenger but <i>modernTM</i></h3>
    </div>

    <div id="chat-window"></div>

    <button onclick="display_new_message()">CONTINUE</button>

    <script>
        const chatWindow = document.getElementById('chat-window');
        
        const message_bank = [
            "Hey!!!",
            "Ummm, there hasn't been any visitors in a while so, hi!",
            "So, uh, my job here is to introduce you to this... site.",
            "I kinda don't really know anything about it",
            "I'm just trapped here",
            "So yeah.",
            "what I've gathered from wondering around this place for so many years is",
            "the creator of this place is kind of a weirdo.",
            "he makes these... things...",
            "like art and 'music', I mean it's cool",
            "but he 'did' make me and trap me for so many years",
            "I mean, at least he gives me things to do",
            "sometimes larping, sometimes doing whatever this is",
            "but hey, at least I can talk to you haha.",
            "well, back to what I was saying.",
            "apparently this site serves absolutely no purpose",
            "originally, I think it was supposed to be some kind of backend for his strange projects",
            "and his drive, but he thought it was kinda unsecure, so he just made this place instead",
            "and well, I mean, I'm pretty sure he's going to use this domain for his strange projects",
            "well, maybe not the drive, but the electronics thingamajig",
            "but man, you should've SEEN what this looked like before",
            "bzzt. bzzt. Oh, do you wanna listen to another one?",
            "anyway. that's the jist of it.",
            "...",
            "...",
            "Oh yeah, wanna listen to some of his things?",
            "cluttered_sandbox_vu(1).mp3",
            "pretty cool right?",
            "anyway. It kinda sucks that I can't hear you. I hope he adds dialogue options soon",
            "might be a new featuree in another update 5 months from now?",
            ":0",
            "hmm...",
            "wanna hear another one?",
            "*ruffles vinyls*",
            "hmm... how about this one?",
            "New Song (5)2.mp3",
            "oh sweet! I don't think I've heard this one before",
            "Why do I feel like you're trying to say something.",
            "oh? it sounds horrible? you want to see a different one?",
            "that's true",
            "okay, hold on lemme see if I can find another thing he made",
            "./art/cat_mouse_research.jpg",
            "hehe, I like this one",
            "did you hear its story?",
            "this is from one of his scrapped novel projects where he was trying to make an... *ehem*.",
            "a post apocalyptic dystopian world where humans found a way to reproduce magic",
            "and it revolves around cat and mice",
            "eventually, the human race got scared of the felines as they realized how much stronger they are",
            "so they started hunting them down",
            "the mice as well, knowing that they're their closest companion.",
            "they were kept as prisoners, eventually succumbing to injuries, or being experimented on",
            "some even betraying their friends and family just so the pain would stop",
            "revealing the secrets of the feline race which led to their extinction",
            "with the side effect of the mouse race eventually dying out as well",
            "with this, humans started to experience melancholy, some even going mad",
            "losing control of theirselves.",
            "so then, eventually, tall pillars started appearing all around town, acting as a beacon",
            "and with this, strange things started occuring.",
            "everyone, and every thing started to either go mad or die.",
            "flowers would wilt away, animals eating theirselves, killing each other",
            "like they lost all sense of meaning.",
            "so then,",
            "the ones who were left grouped together, all around the world, they devised a plan",
            "a plan for a new world, one where everyone could be equal",
            "again, without the discovery of magic. without the greed of humanity",
            "an experiment was done by some of the smartest people",
            "they devised an unreasonable plan to reset the world",
            "they created a device that would seal away the earth as we know it",
            "trapping the old world in a layer of crust, and then killing everything inside",
            "while on the new world, seeds would be planted and everything for life to grow again",
            "this plan was called the Rasrikosher",
            "...",
            "...",
            "yknow, I actually don't know what comes after.",
            "the creator never finished that story",
            "honestly, I kind of wish he did",
            "though, i know for sure that he was keeping information from me",
            "as, originally, on the original manuscript, there were so much more",
            "i really feel that he has a plan on finishing this story someday",
            "as I could tell he was trying really hard to redact major spoilers from me",
            "but well, we don't really know what's going on that guy's mind, do we?",
            "...",
            "ohhh man. I do talk a lot, don't I? hehe.",
            "well, that's all for now. thanks for keeping me company.",
            "I'll see you around. hopefully.",
            "see ya!",
            "SYSTEM: TERMINATED CONNECTION"
        ];
        
        let message_index = 0;

        function display_new_message() {
            if (message_index < message_bank.length) {
                displayMessage(message_bank[message_index]);
                message_index += 1;
            }
        }

        function displayMessage(msg) {
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            const msgDiv = document.createElement('div');
            
            const isSystem = msg.startsWith("SYSTEM:");
            
            if (isSystem) {
                msgDiv.className = 'system-msg';
                msgDiv.innerHTML = `${msg}`;
            } else {
                msgDiv.className = 'container';
                
                const isImage = msg.match(/\.(jpeg|jpg|gif|png|webp)$/) != null || msg.includes('text=');
                const isAudio = msg.match(/\.(mp3|wav|ogg|m4a)$/) != null;

                if (isAudio) {
                    msgDiv.innerHTML = `<audio controls><source src="${msg}"></audio>`;
                } else if (isImage) {
                    msgDiv.innerHTML = `<img src="${msg}" class="chat-img">`;
                } else {
                    msgDiv.innerHTML = `<p>${msg}</p>`;
                }
                
                msgDiv.innerHTML += `<span class="time-right">${time}</span><div style="clear:both;"></div>`;
            }
            
            chatWindow.appendChild(msgDiv);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        window.onload = () => displayMessage("SYSTEM: ONLINE, INCOMING MESSAGE");
    </script>
</body>
</html>